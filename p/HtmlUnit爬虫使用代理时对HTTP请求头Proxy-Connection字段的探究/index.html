<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="èƒŒæ™¯ æœ€è¿‘ç»™ä»¥å‰å†™çš„ä¸€ä¸ªåˆ·æµé‡çš„çˆ¬è™«/å·¥å…·å¢åŠ åŠ¨æ€åˆ‡æ¢ä»£ç†çš„åŠŸèƒ½ã€‚
è¿™ä¸ªå·¥å…·åŸºäºJavaå¼€å‘ï¼Œä½¿ç”¨äº†HtmlUnitåº“æ¨¡æ‹Ÿæµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼Œå¹¶åŠ è½½é¡µé¢ä¸­æ‰€æœ‰çš„JSä»¥è§¦å‘ç¬¬ä¸‰æ–¹ç›‘æ§ã€‚å…¶å®å¯ä»¥æŠ“ç¬¬ä¸‰æ–¹ç›‘æ§çš„è¯·æ±‚ï¼Œç„¶åå†ç›´æ¥æ¨¡æ‹Ÿè¿™äº›è¯·æ±‚ï¼Œä½†è¿™æ ·å°±ç¼ºä¹é€šç”¨æ€§ï¼Œå³ä¸åŒçš„ç½‘ç«™éœ€è¦å•ç‹¬é’ˆå¯¹æŠ“è¯·æ±‚åˆ†æï¼Œæ‰€ä»¥é€‰æ‹©äº†ç›´æ¥æ¨¡æ‹Ÿæµè§ˆå™¨åŠ è½½JSçš„æ–¹æ³•ã€‚
è€Œæœ€è¿‘æ–°éœ€æ±‚è¦æ±‚å¢åŠ ä½¿ç”¨ä»£ç†æ¨¡æ‹Ÿå¤šåœ°è®¿é—®çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ï¼š
 å…ˆæ˜¯å†™äº†ä¸ªç®€å•çš„Pythonçˆ¬è™«çˆ¬å„ç§å…è´¹ä»£ç†çš„ç½‘ç«™ï¼Œä¸€ä¸€éªŒè¯å¯ç”¨æ€§å¹¶æ”¾å…¥æ•°æ®åº“ä¸­å¤‡ç”¨ï¼› è€Œåå‘ç°è¿™æ ·æŠ“åˆ°çš„ä»£ç†å¾ˆå°‘ï¼Œä¸€ç›´ç»´æŒ50ä¸ªå·¦å³å¯ç”¨çš„ï¼Œè€Œä¸”ç»å¸¸è¿”å›403é”™è¯¯ï¼Œä¸èƒ½æ»¡è¶³åˆ·æµé‡å·¥å…·çš„éœ€æ±‚ï¼Œæ‰€ä»¥è´­ä¹°äº†æŸæ”¶è´¹ä»£ç†ï¼› åœ¨ä½¿ç”¨æ”¶è´¹ä»£ç†çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°é€šè¿‡å¾ˆå¤šå®£ç§°é«˜å¯é çš„ä»£ç†è¿›è¡Œè®¿é—®æ—¶ä¾ç„¶è¿”å›403é”™è¯¯ç ï¼Œç»“æœæ˜¯å¤§é‡ä»£ç†ä¸å¯ç”¨ã€‚  é—®é¢˜åˆ†æ é¦–å…ˆï¼ŒPythonæŠ“å›æ¥çš„ä»£ç†æ˜¯ç»è¿‡Pythonçš„Requestsåº“æ£€éªŒçš„ï¼Œç¡®è®¤å¯ä»¥é€šè¿‡å…¶è¿›è¡Œç½‘é¡µè®¿é—®æ‰æ”¾å…¥æ•°æ®åº“çš„ï¼›è€Œè´­ä¹°çš„ä»£ç†å®£ç§°é«˜å¯é çš„ä¹Ÿæ˜¯æœ‰è‡ªå·±çš„æ£€æµ‹çš„ï¼Œè€Œä¸”å¯ä»¥çœ‹åˆ°ä»–ä»¬çš„æ£€éªŒæ—¶é—´è·Ÿæˆ‘çš„ä½¿ç”¨æ—¶é—´ä¸€èˆ¬åªç›¸å·®å‡ åˆ†é’Ÿï¼Œåº”è¯¥ä¸ä¼šæœ‰å¤§é‡ä»£ç†åœ¨è¿™å‡ åˆ†é’Ÿä¹‹å†…å¤±æ•ˆã€‚
æ‰€ä»¥æ€€ç–‘æ˜¯HtmlUnitçš„é—®é¢˜ã€‚HtmlUnitåº“å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸åŒçš„æµè§ˆå™¨ç±»å‹/ç‰ˆæœ¬ï¼ˆæ ¹æ®å®˜ç½‘æ–‡æ¡£ï¼Œè¿™äº›ä¸åŒçš„æµè§ˆå™¨çš„åŒºåˆ«æ˜¯JSçš„è§£ææ–¹æ³•å’ŒUser-Agentã€HTTPè¯·æ±‚å¤´ï¼‰ï¼Œæˆ‘ä»¬é¦–å…ˆå°è¯•äº†æ‰€æœ‰HtmlUnitæ”¯æŒçš„æµè§ˆå™¨ç±»å‹/ç‰ˆæœ¬ï¼Œå‘ç°è¿˜æ˜¯æœ‰å¤§é‡çš„ä»£ç†åœ¨ä½¿ç”¨æ—¶è¿”å›403é”™è¯¯ç ã€‚
å†æ€è€ƒä¸ºä»€ä¹ˆä¼šè¿”å›403ï¼Œè¦ä¹ˆå°±æ˜¯è¯·æ±‚å¤´æœ‰é—®é¢˜ï¼Œè¦ä¹ˆæˆ‘ä»¬çš„IPè¢«å°äº†ã€‚ä½†æˆ‘ä»¬çš„IPåº”è¯¥æ²¡å¹²è¿‡ä»€ä¹ˆåäº‹ï¼Œä¸ä¼šè½»æ˜“è¢«åˆ—å…¥é»‘åå•å§ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾€è¯·æ±‚å¤´çš„æ–¹å‘å»æƒ³ï¼Œæ¯•ç«Ÿçˆ¬è™«çš„è¯å‡ºé—®é¢˜ä¹Ÿç»å¸¸æ˜¯å› ä¸ºè¯·æ±‚å¤´æœ‰é—®é¢˜ï¼Œå¼‚äºå¸¸è§„çš„è®¿é—®ã€‚æ‰€ä»¥æˆ‘ä»¬å°è¯•äº†å¾ˆå¤šUser-Agentï¼Œå‘ç°è¿˜æ˜¯ä¸è¡Œã€‚
æœ€åè€ƒè™‘åˆ°æŠ“åŒ…åˆ†æã€‚ç›´æ¥ç”¨WireSharkè¿›è¡ŒæŠ“åŒ…ï¼Œç­›é€‰HTTPåŒ…ï¼Œåˆ†åˆ«æˆªå–Pythonçš„Requestsåº“å’ŒJavaçš„HtmlUnitå»ä½¿ç”¨åŒä¸€ä¸ªä»£ç†è®¿é—®åŒä¸€ä¸ªç½‘é¡µçš„è¯·æ±‚åŒ…ï¼Œå¦‚ä¸‹ã€‚ Pythonçš„Requestsåº“ä½¿ç”¨ä»£ç†è®¿é—®äº§ç”Ÿçš„HTTPè¯·æ±‚åŒ…ï¼š
Hypertext Transfer Protocol  GET http://www.***.com/test/index.htm HTTP/1.1\r\n  [Expert Info (Chat/Sequence): GET http://www.***.com/test/index.htm HTTP/1.1\r\n] [GET http://www.***.com/test/index.htm HTTP/1.1\r\n] [Severity level: Chat] [Group: Sequence]  Request Method: GET  Request URI: http://www.***.com/test/index.htm  Request Version: HTTP/1.1  Host: www.***.com\r\n  Connection: keep-alive\r\n  Accept-Encoding: gzip, deflate\r\n  Accept: */*\r\n  User-Agent: python-requests/2.12.2\r\n  \r\n  [Full request URI: http://www."><title>HtmlUnitçˆ¬è™«ä½¿ç”¨ä»£ç†æ—¶å¯¹HTTPè¯·æ±‚å¤´Proxy-Connectionå­—æ®µçš„æ¢ç©¶</title><link rel=canonical href=https://leibnizhu.github.io/p/HtmlUnit%E7%88%AC%E8%99%AB%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E6%97%B6%E5%AF%B9HTTP%E8%AF%B7%E6%B1%82%E5%A4%B4Proxy-Connection%E5%AD%97%E6%AE%B5%E7%9A%84%E6%8E%A2%E7%A9%B6/><link rel=stylesheet href=/scss/style.min.f6e1f9fc3ff66a58601c08d5ce96493eafb5f1b936be2f7b2eacd3e7784f2f38.css><meta property="og:title" content="HtmlUnitçˆ¬è™«ä½¿ç”¨ä»£ç†æ—¶å¯¹HTTPè¯·æ±‚å¤´Proxy-Connectionå­—æ®µçš„æ¢ç©¶"><meta property="og:description" content="èƒŒæ™¯ æœ€è¿‘ç»™ä»¥å‰å†™çš„ä¸€ä¸ªåˆ·æµé‡çš„çˆ¬è™«/å·¥å…·å¢åŠ åŠ¨æ€åˆ‡æ¢ä»£ç†çš„åŠŸèƒ½ã€‚
è¿™ä¸ªå·¥å…·åŸºäºJavaå¼€å‘ï¼Œä½¿ç”¨äº†HtmlUnitåº“æ¨¡æ‹Ÿæµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼Œå¹¶åŠ è½½é¡µé¢ä¸­æ‰€æœ‰çš„JSä»¥è§¦å‘ç¬¬ä¸‰æ–¹ç›‘æ§ã€‚å…¶å®å¯ä»¥æŠ“ç¬¬ä¸‰æ–¹ç›‘æ§çš„è¯·æ±‚ï¼Œç„¶åå†ç›´æ¥æ¨¡æ‹Ÿè¿™äº›è¯·æ±‚ï¼Œä½†è¿™æ ·å°±ç¼ºä¹é€šç”¨æ€§ï¼Œå³ä¸åŒçš„ç½‘ç«™éœ€è¦å•ç‹¬é’ˆå¯¹æŠ“è¯·æ±‚åˆ†æï¼Œæ‰€ä»¥é€‰æ‹©äº†ç›´æ¥æ¨¡æ‹Ÿæµè§ˆå™¨åŠ è½½JSçš„æ–¹æ³•ã€‚
è€Œæœ€è¿‘æ–°éœ€æ±‚è¦æ±‚å¢åŠ ä½¿ç”¨ä»£ç†æ¨¡æ‹Ÿå¤šåœ°è®¿é—®çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ï¼š
 å…ˆæ˜¯å†™äº†ä¸ªç®€å•çš„Pythonçˆ¬è™«çˆ¬å„ç§å…è´¹ä»£ç†çš„ç½‘ç«™ï¼Œä¸€ä¸€éªŒè¯å¯ç”¨æ€§å¹¶æ”¾å…¥æ•°æ®åº“ä¸­å¤‡ç”¨ï¼› è€Œåå‘ç°è¿™æ ·æŠ“åˆ°çš„ä»£ç†å¾ˆå°‘ï¼Œä¸€ç›´ç»´æŒ50ä¸ªå·¦å³å¯ç”¨çš„ï¼Œè€Œä¸”ç»å¸¸è¿”å›403é”™è¯¯ï¼Œä¸èƒ½æ»¡è¶³åˆ·æµé‡å·¥å…·çš„éœ€æ±‚ï¼Œæ‰€ä»¥è´­ä¹°äº†æŸæ”¶è´¹ä»£ç†ï¼› åœ¨ä½¿ç”¨æ”¶è´¹ä»£ç†çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°é€šè¿‡å¾ˆå¤šå®£ç§°é«˜å¯é çš„ä»£ç†è¿›è¡Œè®¿é—®æ—¶ä¾ç„¶è¿”å›403é”™è¯¯ç ï¼Œç»“æœæ˜¯å¤§é‡ä»£ç†ä¸å¯ç”¨ã€‚  é—®é¢˜åˆ†æ é¦–å…ˆï¼ŒPythonæŠ“å›æ¥çš„ä»£ç†æ˜¯ç»è¿‡Pythonçš„Requestsåº“æ£€éªŒçš„ï¼Œç¡®è®¤å¯ä»¥é€šè¿‡å…¶è¿›è¡Œç½‘é¡µè®¿é—®æ‰æ”¾å…¥æ•°æ®åº“çš„ï¼›è€Œè´­ä¹°çš„ä»£ç†å®£ç§°é«˜å¯é çš„ä¹Ÿæ˜¯æœ‰è‡ªå·±çš„æ£€æµ‹çš„ï¼Œè€Œä¸”å¯ä»¥çœ‹åˆ°ä»–ä»¬çš„æ£€éªŒæ—¶é—´è·Ÿæˆ‘çš„ä½¿ç”¨æ—¶é—´ä¸€èˆ¬åªç›¸å·®å‡ åˆ†é’Ÿï¼Œåº”è¯¥ä¸ä¼šæœ‰å¤§é‡ä»£ç†åœ¨è¿™å‡ åˆ†é’Ÿä¹‹å†…å¤±æ•ˆã€‚
æ‰€ä»¥æ€€ç–‘æ˜¯HtmlUnitçš„é—®é¢˜ã€‚HtmlUnitåº“å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸åŒçš„æµè§ˆå™¨ç±»å‹/ç‰ˆæœ¬ï¼ˆæ ¹æ®å®˜ç½‘æ–‡æ¡£ï¼Œè¿™äº›ä¸åŒçš„æµè§ˆå™¨çš„åŒºåˆ«æ˜¯JSçš„è§£ææ–¹æ³•å’ŒUser-Agentã€HTTPè¯·æ±‚å¤´ï¼‰ï¼Œæˆ‘ä»¬é¦–å…ˆå°è¯•äº†æ‰€æœ‰HtmlUnitæ”¯æŒçš„æµè§ˆå™¨ç±»å‹/ç‰ˆæœ¬ï¼Œå‘ç°è¿˜æ˜¯æœ‰å¤§é‡çš„ä»£ç†åœ¨ä½¿ç”¨æ—¶è¿”å›403é”™è¯¯ç ã€‚
å†æ€è€ƒä¸ºä»€ä¹ˆä¼šè¿”å›403ï¼Œè¦ä¹ˆå°±æ˜¯è¯·æ±‚å¤´æœ‰é—®é¢˜ï¼Œè¦ä¹ˆæˆ‘ä»¬çš„IPè¢«å°äº†ã€‚ä½†æˆ‘ä»¬çš„IPåº”è¯¥æ²¡å¹²è¿‡ä»€ä¹ˆåäº‹ï¼Œä¸ä¼šè½»æ˜“è¢«åˆ—å…¥é»‘åå•å§ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾€è¯·æ±‚å¤´çš„æ–¹å‘å»æƒ³ï¼Œæ¯•ç«Ÿçˆ¬è™«çš„è¯å‡ºé—®é¢˜ä¹Ÿç»å¸¸æ˜¯å› ä¸ºè¯·æ±‚å¤´æœ‰é—®é¢˜ï¼Œå¼‚äºå¸¸è§„çš„è®¿é—®ã€‚æ‰€ä»¥æˆ‘ä»¬å°è¯•äº†å¾ˆå¤šUser-Agentï¼Œå‘ç°è¿˜æ˜¯ä¸è¡Œã€‚
æœ€åè€ƒè™‘åˆ°æŠ“åŒ…åˆ†æã€‚ç›´æ¥ç”¨WireSharkè¿›è¡ŒæŠ“åŒ…ï¼Œç­›é€‰HTTPåŒ…ï¼Œåˆ†åˆ«æˆªå–Pythonçš„Requestsåº“å’ŒJavaçš„HtmlUnitå»ä½¿ç”¨åŒä¸€ä¸ªä»£ç†è®¿é—®åŒä¸€ä¸ªç½‘é¡µçš„è¯·æ±‚åŒ…ï¼Œå¦‚ä¸‹ã€‚ Pythonçš„Requestsåº“ä½¿ç”¨ä»£ç†è®¿é—®äº§ç”Ÿçš„HTTPè¯·æ±‚åŒ…ï¼š
Hypertext Transfer Protocol  GET http://www.***.com/test/index.htm HTTP/1.1\r\n  [Expert Info (Chat/Sequence): GET http://www.***.com/test/index.htm HTTP/1.1\r\n] [GET http://www.***.com/test/index.htm HTTP/1.1\r\n] [Severity level: Chat] [Group: Sequence]  Request Method: GET  Request URI: http://www.***.com/test/index.htm  Request Version: HTTP/1.1  Host: www.***.com\r\n  Connection: keep-alive\r\n  Accept-Encoding: gzip, deflate\r\n  Accept: */*\r\n  User-Agent: python-requests/2.12.2\r\n  \r\n  [Full request URI: http://www."><meta property="og:url" content="https://leibnizhu.github.io/p/HtmlUnit%E7%88%AC%E8%99%AB%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E6%97%B6%E5%AF%B9HTTP%E8%AF%B7%E6%B1%82%E5%A4%B4Proxy-Connection%E5%AD%97%E6%AE%B5%E7%9A%84%E6%8E%A2%E7%A9%B6/"><meta property="og:site_name" content="Heaven's Door"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="çˆ¬è™«"><meta property="article:tag" content="ä»£ç†"><meta property="article:tag" content="HtmlUnit"><meta property="article:published_time" content="2016-12-04T09:39:02+00:00"><meta property="article:modified_time" content="2016-12-04T09:39:02+00:00"><meta property="og:image" content="https://leibnizhu.github.io/"><meta name=twitter:title content="HtmlUnitçˆ¬è™«ä½¿ç”¨ä»£ç†æ—¶å¯¹HTTPè¯·æ±‚å¤´Proxy-Connectionå­—æ®µçš„æ¢ç©¶"><meta name=twitter:description content="èƒŒæ™¯ æœ€è¿‘ç»™ä»¥å‰å†™çš„ä¸€ä¸ªåˆ·æµé‡çš„çˆ¬è™«/å·¥å…·å¢åŠ åŠ¨æ€åˆ‡æ¢ä»£ç†çš„åŠŸèƒ½ã€‚
è¿™ä¸ªå·¥å…·åŸºäºJavaå¼€å‘ï¼Œä½¿ç”¨äº†HtmlUnitåº“æ¨¡æ‹Ÿæµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼Œå¹¶åŠ è½½é¡µé¢ä¸­æ‰€æœ‰çš„JSä»¥è§¦å‘ç¬¬ä¸‰æ–¹ç›‘æ§ã€‚å…¶å®å¯ä»¥æŠ“ç¬¬ä¸‰æ–¹ç›‘æ§çš„è¯·æ±‚ï¼Œç„¶åå†ç›´æ¥æ¨¡æ‹Ÿè¿™äº›è¯·æ±‚ï¼Œä½†è¿™æ ·å°±ç¼ºä¹é€šç”¨æ€§ï¼Œå³ä¸åŒçš„ç½‘ç«™éœ€è¦å•ç‹¬é’ˆå¯¹æŠ“è¯·æ±‚åˆ†æï¼Œæ‰€ä»¥é€‰æ‹©äº†ç›´æ¥æ¨¡æ‹Ÿæµè§ˆå™¨åŠ è½½JSçš„æ–¹æ³•ã€‚
è€Œæœ€è¿‘æ–°éœ€æ±‚è¦æ±‚å¢åŠ ä½¿ç”¨ä»£ç†æ¨¡æ‹Ÿå¤šåœ°è®¿é—®çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ï¼š
 å…ˆæ˜¯å†™äº†ä¸ªç®€å•çš„Pythonçˆ¬è™«çˆ¬å„ç§å…è´¹ä»£ç†çš„ç½‘ç«™ï¼Œä¸€ä¸€éªŒè¯å¯ç”¨æ€§å¹¶æ”¾å…¥æ•°æ®åº“ä¸­å¤‡ç”¨ï¼› è€Œåå‘ç°è¿™æ ·æŠ“åˆ°çš„ä»£ç†å¾ˆå°‘ï¼Œä¸€ç›´ç»´æŒ50ä¸ªå·¦å³å¯ç”¨çš„ï¼Œè€Œä¸”ç»å¸¸è¿”å›403é”™è¯¯ï¼Œä¸èƒ½æ»¡è¶³åˆ·æµé‡å·¥å…·çš„éœ€æ±‚ï¼Œæ‰€ä»¥è´­ä¹°äº†æŸæ”¶è´¹ä»£ç†ï¼› åœ¨ä½¿ç”¨æ”¶è´¹ä»£ç†çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°é€šè¿‡å¾ˆå¤šå®£ç§°é«˜å¯é çš„ä»£ç†è¿›è¡Œè®¿é—®æ—¶ä¾ç„¶è¿”å›403é”™è¯¯ç ï¼Œç»“æœæ˜¯å¤§é‡ä»£ç†ä¸å¯ç”¨ã€‚  é—®é¢˜åˆ†æ é¦–å…ˆï¼ŒPythonæŠ“å›æ¥çš„ä»£ç†æ˜¯ç»è¿‡Pythonçš„Requestsåº“æ£€éªŒçš„ï¼Œç¡®è®¤å¯ä»¥é€šè¿‡å…¶è¿›è¡Œç½‘é¡µè®¿é—®æ‰æ”¾å…¥æ•°æ®åº“çš„ï¼›è€Œè´­ä¹°çš„ä»£ç†å®£ç§°é«˜å¯é çš„ä¹Ÿæ˜¯æœ‰è‡ªå·±çš„æ£€æµ‹çš„ï¼Œè€Œä¸”å¯ä»¥çœ‹åˆ°ä»–ä»¬çš„æ£€éªŒæ—¶é—´è·Ÿæˆ‘çš„ä½¿ç”¨æ—¶é—´ä¸€èˆ¬åªç›¸å·®å‡ åˆ†é’Ÿï¼Œåº”è¯¥ä¸ä¼šæœ‰å¤§é‡ä»£ç†åœ¨è¿™å‡ åˆ†é’Ÿä¹‹å†…å¤±æ•ˆã€‚
æ‰€ä»¥æ€€ç–‘æ˜¯HtmlUnitçš„é—®é¢˜ã€‚HtmlUnitåº“å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸åŒçš„æµè§ˆå™¨ç±»å‹/ç‰ˆæœ¬ï¼ˆæ ¹æ®å®˜ç½‘æ–‡æ¡£ï¼Œè¿™äº›ä¸åŒçš„æµè§ˆå™¨çš„åŒºåˆ«æ˜¯JSçš„è§£ææ–¹æ³•å’ŒUser-Agentã€HTTPè¯·æ±‚å¤´ï¼‰ï¼Œæˆ‘ä»¬é¦–å…ˆå°è¯•äº†æ‰€æœ‰HtmlUnitæ”¯æŒçš„æµè§ˆå™¨ç±»å‹/ç‰ˆæœ¬ï¼Œå‘ç°è¿˜æ˜¯æœ‰å¤§é‡çš„ä»£ç†åœ¨ä½¿ç”¨æ—¶è¿”å›403é”™è¯¯ç ã€‚
å†æ€è€ƒä¸ºä»€ä¹ˆä¼šè¿”å›403ï¼Œè¦ä¹ˆå°±æ˜¯è¯·æ±‚å¤´æœ‰é—®é¢˜ï¼Œè¦ä¹ˆæˆ‘ä»¬çš„IPè¢«å°äº†ã€‚ä½†æˆ‘ä»¬çš„IPåº”è¯¥æ²¡å¹²è¿‡ä»€ä¹ˆåäº‹ï¼Œä¸ä¼šè½»æ˜“è¢«åˆ—å…¥é»‘åå•å§ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾€è¯·æ±‚å¤´çš„æ–¹å‘å»æƒ³ï¼Œæ¯•ç«Ÿçˆ¬è™«çš„è¯å‡ºé—®é¢˜ä¹Ÿç»å¸¸æ˜¯å› ä¸ºè¯·æ±‚å¤´æœ‰é—®é¢˜ï¼Œå¼‚äºå¸¸è§„çš„è®¿é—®ã€‚æ‰€ä»¥æˆ‘ä»¬å°è¯•äº†å¾ˆå¤šUser-Agentï¼Œå‘ç°è¿˜æ˜¯ä¸è¡Œã€‚
æœ€åè€ƒè™‘åˆ°æŠ“åŒ…åˆ†æã€‚ç›´æ¥ç”¨WireSharkè¿›è¡ŒæŠ“åŒ…ï¼Œç­›é€‰HTTPåŒ…ï¼Œåˆ†åˆ«æˆªå–Pythonçš„Requestsåº“å’ŒJavaçš„HtmlUnitå»ä½¿ç”¨åŒä¸€ä¸ªä»£ç†è®¿é—®åŒä¸€ä¸ªç½‘é¡µçš„è¯·æ±‚åŒ…ï¼Œå¦‚ä¸‹ã€‚ Pythonçš„Requestsåº“ä½¿ç”¨ä»£ç†è®¿é—®äº§ç”Ÿçš„HTTPè¯·æ±‚åŒ…ï¼š
Hypertext Transfer Protocol  GET http://www.***.com/test/index.htm HTTP/1.1\r\n  [Expert Info (Chat/Sequence): GET http://www.***.com/test/index.htm HTTP/1.1\r\n] [GET http://www.***.com/test/index.htm HTTP/1.1\r\n] [Severity level: Chat] [Group: Sequence]  Request Method: GET  Request URI: http://www.***.com/test/index.htm  Request Version: HTTP/1.1  Host: www.***.com\r\n  Connection: keep-alive\r\n  Accept-Encoding: gzip, deflate\r\n  Accept: */*\r\n  User-Agent: python-requests/2.12.2\r\n  \r\n  [Full request URI: http://www."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://leibnizhu.github.io/"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu4af873b90feb2f44d14cf5fcf42d034c_7593_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸŸ</span></figure><div class=site-meta><h1 class=site-name><a href=/>Heaven's Door</a></h1><h2 class=site-description>That cold black cloud is comin' down, Feels like I'm knockin' on heaven's doorâ€¦</h2></div></header><ol class=social-menu><li><a href=https://leibnizhu.github.io title=Home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg></a></li><li><a href=https://github.com/leibnizhu target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto:leibnizhu@gmail.com target=_blank title=Email><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-gmail" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16 20h3a1 1 0 001-1V5a1 1 0 00-1-1h-3v16z"/><path d="M5 20h3V4H5A1 1 0 004 5v14a1 1 0 001 1z"/><path d="M16 4l-4 4-4-4"/><path d="M4 6.5l8 7.5 8-7.5"/></svg></a></li><li><a href=https://leibnizhu.github.io/running target=_blank title=Running><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-run" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="13" cy="4" r="1"/><path d="M4 17l5 1 .75-1.5"/><path d="M15 21v-4l-4-3 1-6"/><path d="M7 12V9l5-1 3 3 3 1"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/About/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/Links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/p/HtmlUnit%E7%88%AC%E8%99%AB%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E6%97%B6%E5%AF%B9HTTP%E8%AF%B7%E6%B1%82%E5%A4%B4Proxy-Connection%E5%AD%97%E6%AE%B5%E7%9A%84%E6%8E%A2%E7%A9%B6/>HtmlUnitçˆ¬è™«ä½¿ç”¨ä»£ç†æ—¶å¯¹HTTPè¯·æ±‚å¤´Proxy-Connectionå­—æ®µçš„æ¢ç©¶</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Dec 04, 2016</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>2 minute read</time></div></footer></div></header><section class=article-content><h1 id=èƒŒæ™¯>èƒŒæ™¯</h1><p>æœ€è¿‘ç»™ä»¥å‰å†™çš„ä¸€ä¸ªåˆ·æµé‡çš„çˆ¬è™«/å·¥å…·å¢åŠ åŠ¨æ€åˆ‡æ¢ä»£ç†çš„åŠŸèƒ½ã€‚</p><p>è¿™ä¸ªå·¥å…·åŸºäºJavaå¼€å‘ï¼Œä½¿ç”¨äº†HtmlUnitåº“æ¨¡æ‹Ÿæµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼Œå¹¶åŠ è½½é¡µé¢ä¸­æ‰€æœ‰çš„JSä»¥è§¦å‘ç¬¬ä¸‰æ–¹ç›‘æ§ã€‚å…¶å®å¯ä»¥æŠ“ç¬¬ä¸‰æ–¹ç›‘æ§çš„è¯·æ±‚ï¼Œç„¶åå†ç›´æ¥æ¨¡æ‹Ÿè¿™äº›è¯·æ±‚ï¼Œä½†è¿™æ ·å°±ç¼ºä¹é€šç”¨æ€§ï¼Œå³ä¸åŒçš„ç½‘ç«™éœ€è¦å•ç‹¬é’ˆå¯¹æŠ“è¯·æ±‚åˆ†æï¼Œæ‰€ä»¥é€‰æ‹©äº†ç›´æ¥æ¨¡æ‹Ÿæµè§ˆå™¨åŠ è½½JSçš„æ–¹æ³•ã€‚</p><p>è€Œæœ€è¿‘æ–°éœ€æ±‚è¦æ±‚å¢åŠ ä½¿ç”¨ä»£ç†æ¨¡æ‹Ÿå¤šåœ°è®¿é—®çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ï¼š</p><ol><li>å…ˆæ˜¯å†™äº†ä¸ªç®€å•çš„Pythonçˆ¬è™«çˆ¬å„ç§å…è´¹ä»£ç†çš„ç½‘ç«™ï¼Œä¸€ä¸€éªŒè¯å¯ç”¨æ€§å¹¶æ”¾å…¥æ•°æ®åº“ä¸­å¤‡ç”¨ï¼›</li><li>è€Œåå‘ç°è¿™æ ·æŠ“åˆ°çš„ä»£ç†å¾ˆå°‘ï¼Œä¸€ç›´ç»´æŒ50ä¸ªå·¦å³å¯ç”¨çš„ï¼Œè€Œä¸”ç»å¸¸è¿”å›403é”™è¯¯ï¼Œä¸èƒ½æ»¡è¶³åˆ·æµé‡å·¥å…·çš„éœ€æ±‚ï¼Œæ‰€ä»¥è´­ä¹°äº†æŸæ”¶è´¹ä»£ç†ï¼›</li><li>åœ¨ä½¿ç”¨æ”¶è´¹ä»£ç†çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°é€šè¿‡å¾ˆå¤šå®£ç§°é«˜å¯é çš„ä»£ç†è¿›è¡Œè®¿é—®æ—¶ä¾ç„¶è¿”å›403é”™è¯¯ç ï¼Œç»“æœæ˜¯å¤§é‡ä»£ç†ä¸å¯ç”¨ã€‚</li></ol><h1 id=é—®é¢˜åˆ†æ>é—®é¢˜åˆ†æ</h1><p>é¦–å…ˆï¼ŒPythonæŠ“å›æ¥çš„ä»£ç†æ˜¯ç»è¿‡Pythonçš„Requestsåº“æ£€éªŒçš„ï¼Œç¡®è®¤å¯ä»¥é€šè¿‡å…¶è¿›è¡Œç½‘é¡µè®¿é—®æ‰æ”¾å…¥æ•°æ®åº“çš„ï¼›è€Œè´­ä¹°çš„ä»£ç†å®£ç§°é«˜å¯é çš„ä¹Ÿæ˜¯æœ‰è‡ªå·±çš„æ£€æµ‹çš„ï¼Œè€Œä¸”å¯ä»¥çœ‹åˆ°ä»–ä»¬çš„æ£€éªŒæ—¶é—´è·Ÿæˆ‘çš„ä½¿ç”¨æ—¶é—´ä¸€èˆ¬åªç›¸å·®å‡ åˆ†é’Ÿï¼Œåº”è¯¥ä¸ä¼šæœ‰å¤§é‡ä»£ç†åœ¨è¿™å‡ åˆ†é’Ÿä¹‹å†…å¤±æ•ˆã€‚</p><p>æ‰€ä»¥æ€€ç–‘æ˜¯HtmlUnitçš„é—®é¢˜ã€‚HtmlUnitåº“å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸åŒçš„æµè§ˆå™¨ç±»å‹/ç‰ˆæœ¬ï¼ˆæ ¹æ®å®˜ç½‘æ–‡æ¡£ï¼Œè¿™äº›ä¸åŒçš„æµè§ˆå™¨çš„åŒºåˆ«æ˜¯JSçš„è§£ææ–¹æ³•å’ŒUser-Agentã€HTTPè¯·æ±‚å¤´ï¼‰ï¼Œæˆ‘ä»¬é¦–å…ˆå°è¯•äº†æ‰€æœ‰HtmlUnitæ”¯æŒçš„æµè§ˆå™¨ç±»å‹/ç‰ˆæœ¬ï¼Œå‘ç°è¿˜æ˜¯æœ‰å¤§é‡çš„ä»£ç†åœ¨ä½¿ç”¨æ—¶è¿”å›403é”™è¯¯ç ã€‚</p><p>å†æ€è€ƒä¸ºä»€ä¹ˆä¼šè¿”å›403ï¼Œè¦ä¹ˆå°±æ˜¯è¯·æ±‚å¤´æœ‰é—®é¢˜ï¼Œè¦ä¹ˆæˆ‘ä»¬çš„IPè¢«å°äº†ã€‚ä½†æˆ‘ä»¬çš„IPåº”è¯¥æ²¡å¹²è¿‡ä»€ä¹ˆåäº‹ï¼Œä¸ä¼šè½»æ˜“è¢«åˆ—å…¥é»‘åå•å§ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾€è¯·æ±‚å¤´çš„æ–¹å‘å»æƒ³ï¼Œæ¯•ç«Ÿçˆ¬è™«çš„è¯å‡ºé—®é¢˜ä¹Ÿç»å¸¸æ˜¯å› ä¸ºè¯·æ±‚å¤´æœ‰é—®é¢˜ï¼Œå¼‚äºå¸¸è§„çš„è®¿é—®ã€‚æ‰€ä»¥æˆ‘ä»¬å°è¯•äº†å¾ˆå¤šUser-Agentï¼Œå‘ç°è¿˜æ˜¯ä¸è¡Œã€‚</p><p>æœ€åè€ƒè™‘åˆ°æŠ“åŒ…åˆ†æã€‚ç›´æ¥ç”¨WireSharkè¿›è¡ŒæŠ“åŒ…ï¼Œç­›é€‰HTTPåŒ…ï¼Œåˆ†åˆ«æˆªå–Pythonçš„Requestsåº“å’ŒJavaçš„HtmlUnitå»ä½¿ç”¨åŒä¸€ä¸ªä»£ç†è®¿é—®åŒä¸€ä¸ªç½‘é¡µçš„è¯·æ±‚åŒ…ï¼Œå¦‚ä¸‹ã€‚
Pythonçš„Requestsåº“ä½¿ç”¨ä»£ç†è®¿é—®äº§ç”Ÿçš„HTTPè¯·æ±‚åŒ…ï¼š</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Hypertext Transfer Protocol
</span></span><span style=display:flex><span>    GET http://www.***.com/test/index.htm HTTP/1.1<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>        <span style=color:#5bc4bf>[</span>Expert Info <span style=color:#5bc4bf>(</span>Chat/Sequence<span style=color:#5bc4bf>)</span>: GET http://www.***.com/test/index.htm HTTP/1.1<span style=color:#f99b15>\r\n</span><span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>GET http://www.***.com/test/index.htm HTTP/1.1<span style=color:#f99b15>\r\n</span><span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>Severity level: Chat<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>Group: Sequence<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span>        Request Method: GET
</span></span><span style=display:flex><span>        Request URI: http://www.***.com/test/index.htm
</span></span><span style=display:flex><span>        Request Version: HTTP/1.1
</span></span><span style=display:flex><span>    Host: www.***.com<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    Connection: keep-alive<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    Accept-Encoding: gzip, deflate<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    Accept: */*<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    User-Agent: python-requests/2.12.2<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    <span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    <span style=color:#5bc4bf>[</span>Full request URI: http://www.***.com/test/index.htm<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span>    <span style=color:#5bc4bf>[</span>HTTP request 1/1<span style=color:#5bc4bf>]</span>
</span></span></code></pre></div><p>è€ŒHtmlUnitäº§ç”Ÿçš„åŒ…ï¼š</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Hypertext Transfer Protocol
</span></span><span style=display:flex><span>    GET http://www.***.com/test/index.htm HTTP/1.1<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>        <span style=color:#5bc4bf>[</span>Expert Info <span style=color:#5bc4bf>(</span>Chat/Sequence<span style=color:#5bc4bf>)</span>: GET http://www.***.com/test/index.htm HTTP/1.1<span style=color:#f99b15>\r\n</span><span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>GET http://www.***.com/test/index.htm HTTP/1.1<span style=color:#f99b15>\r\n</span><span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>Severity level: Chat<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>Group: Sequence<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span>        Request Method: GET
</span></span><span style=display:flex><span>        Request URI: http://www.***.com/test/index.htm
</span></span><span style=display:flex><span>        Request Version: HTTP/1.1
</span></span><span style=display:flex><span>    Host: www.***.com<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    User-Agent: Mozilla/5.0 <span style=color:#5bc4bf>(</span>Windows NT 10.0; WOW64<span style=color:#5bc4bf>)</span> AppleWebKit/537.36 <span style=color:#5bc4bf>(</span>KHTML, like Gecko<span style=color:#5bc4bf>)</span> Chrome/54.0.2840.99 Safari/537.36<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    Accept: */*<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    Accept-Language: en-US<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    Accept-Encoding: gzip, deflate<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    Proxy-Connection: keep-alive<span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    <span style=color:#f99b15>\r\n</span>
</span></span><span style=display:flex><span>    <span style=color:#5bc4bf>[</span>Full request URI: http://www.***.com/test/index.htm<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span>    <span style=color:#5bc4bf>[</span>HTTP request 1/1<span style=color:#5bc4bf>]</span>
</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼ŒRequestsä½¿ç”¨çš„User-Agentæ˜¯python-requestsï¼Œç«Ÿç„¶ä¹Ÿæ²¡è¢«æ‹¦æˆªï¼Œè€ŒHtmlUnitä½¿ç”¨çœŸå®æµè§ˆå™¨çš„User-Agentå´è¿”å›403ï¼Œçœ‹æ¥è·ŸUser-Agentæ— å…³ï¼›äº‹å®ä¸Šï¼Œæˆ‘ä»¬å°è¯•å°†HtmlUnitçš„User-Agentè®¾ç½®ä¸ºä¸Requestsä¸€æ ·ï¼Œå†å»è®¿é—®ï¼Œä¸€æ ·å¾—åˆ°403ã€‚</p><p>ç„¶åä»”ç»†çœ‹HTTPè¯·æ±‚å¤´ï¼Œä¸éš¾å‘ç°ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºpython-requestsä½¿ç”¨äº†ä¸€ä¸ªConnectionçš„å­—æ®µï¼Œè¿™ä¸ªå¤§å®¶éƒ½æ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ˜¯è¦æ±‚è¿œç¨‹æœåŠ¡å™¨å¯ç”¨é•¿è¿æ¥çš„ï¼›è€ŒHtmlUnitæ²¡æœ‰Connectionå­—æ®µï¼Œå–è€Œä»£ä¹‹çš„æ˜¯Proxy-Connectionå­—æ®µï¼Œæ˜æ˜¾ä¸ä»£ç†æœ‰å…³ã€‚é‚£ä¹ˆé—®é¢˜å‡ºåœ¨è¿™ä¸ªHTTPè¯·æ±‚å¤´å­—æ®µä¸Šé¢ï¼Ÿï¼Ÿï¼Ÿ</p><h1 id=proxy-connectionæ˜¯ä»€ä¹ˆ>Proxy-Connectionæ˜¯ä»€ä¹ˆ</h1><p>é€šè¿‡Googleæˆ‘ä»¬å‘ç°Proxy-Connectionæ˜¯ä¸ºäº†å…¼å®¹ä¸åŒHTTPåè®®ç‰ˆæœ¬è€Œäº§ç”Ÿçš„ä¸€ä¸ªå­—æ®µï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<br><a class=link href=https://imququ.com/post/the-proxy-connection-header-in-http-request.html target=_blank rel=noopener>Http è¯·æ±‚å¤´ä¸­çš„ Proxy-Connection</a><br>å¤§æ¦‚æ„æ€å°±æ˜¯å¦‚æœä½¿ç”¨ä»£ç†æœåŠ¡çš„æ—¶å€™ï¼Œè¿˜æ˜¯å‘é€Connectionå­—æ®µï¼Œé‚£ä¹ˆä¸€äº›æ—§çš„ä»£ç†æœåŠ¡å™¨ä¸èƒ½å¤„ç†è¿™ä¸ªå­—æ®µè€Œç›´æ¥è½¬å‘ç»™ç›®æ ‡æœåŠ¡å™¨ï¼Œæœ€åç›®æ ‡æœåŠ¡å™¨å¯èƒ½åŒæ„å¼€å¯é•¿è¿æ¥ï¼Œè€Œä»£ç†æœåŠ¡å™¨å´æ²¡æœ‰æ­£ç¡®åœ°å“åº”å»ºç«‹é•¿è¿æ¥ï¼Œæœ€åå¯¼è‡´ä¸èƒ½æ­£å¸¸è®¿é—®ï¼›æ‰€ä»¥æ‰åœ¨ä½¿ç”¨ä»£ç†çš„æ—¶å€™ï¼Œä½¿ç”¨Proxy-Connectionæ›¿ä»£Connectionï¼Œè®©è¿œç¨‹æœåŠ¡å™¨åŒºåˆ†å¯¹å¾…ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œä½¿ç”¨ä»£ç†æœåŠ¡å™¨çš„æ—¶å€™ï¼Œè¯·æ±‚å¤´ä½¿ç”¨Proxy-Connectionå­—æ®µæ˜¯ç¬¦åˆHTTPåè®®çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å…¶å®HtmlUnitçš„å¤„ç†æ˜¯æ­£ç¡®çš„ï¼Œè€ŒRequestsçš„å¤„ç†åè€Œæ˜¯ä¸ç¬¦åˆHTTPåè®®çš„ï¼Ÿ</p><h1 id=htmlunitä¸­å»é™¤proxy-connectionå­—æ®µ>HtmlUnitä¸­å»é™¤Proxy-Connectionå­—æ®µ</h1><p>ä¸ç®¡è°å¯¹è°é”™ï¼Œå°±ç›®å‰çŠ¶å†µè€Œè¨€ï¼Œä¼¼ä¹ä½¿ç”¨äº†Proxy-Connectionå°±æ˜¯ä¼šè®©ä»£ç†æœåŠ¡å™¨è¿”å›403ï¼Œæˆ–è®¸æ˜¯å› ä¸ºè¿™äº›ä»£ç†æœåŠ¡å™¨ä¸å¸Œæœ›å¼€å¯é•¿è¿æ¥ï¼Ÿï¼ˆæ¯•ç«Ÿå¾ˆå¤šä»£ç†æœåŠ¡å™¨éš”ä¸€å°æ®µæ—¶é—´å°±è¦åˆ‡æ¢ç«¯å£ä¹‹ç±»çš„ï¼Œæ¯”è¾ƒè¢«äººé•¿æ—¶é—´å ç”¨ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç›®æ ‡å˜æˆä½¿ç”¨HtmlUnitå‘é€è¯·æ±‚çš„æ—¶å€™å»é™¤HTTPè¯·æ±‚å¤´çš„Proxy-Connectionå­—æ®µã€‚</p><h2 id=removerequestheader>removeRequestHeader()</h2><p>HtmlUnitçš„æ ¸å¿ƒç±»WebClientæœ‰æ–¹æ³•</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>removeRequestHeader<span style=color:#5bc4bf>(</span>String name<span style=color:#5bc4bf>)</span>
</span></span></code></pre></div><p>å¯ä»¥åˆ é™¤è¯·æ±‚å¤´çš„å­—æ®µã€‚ä¸è¿‡ç»è¿‡å°è¯•ï¼Œè°ƒç”¨äº†</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>removeRequestHeader<span style=color:#5bc4bf>(</span><span style=color:#48b685>&#34;Proxy-Connection&#34;</span><span style=color:#5bc4bf>)</span>
</span></span></code></pre></div><p>ä¹‹åï¼Œå‘å‡ºçš„è¯·æ±‚è¿˜æ˜¯å¸¦æœ‰Proxy-Connectionå­—æ®µã€‚</p><h2 id=webrequestremoveadditionalheader>WebRequest.removeAdditionalHeader()</h2><p>äºæ˜¯å°è¯•åˆ«çš„æ–¹æ³•ï¼Œåœ¨è®¿é—®é¡µé¢çš„æ—¶å€™å†åˆ é™¤è¯·æ±‚å¤´ï¼š</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>WebRequest request <span style=color:#5bc4bf>=</span> <span style=color:#815ba4>new</span> WebRequest<span style=color:#5bc4bf>(</span><span style=color:#815ba4>new</span> URL<span style=color:#5bc4bf>(</span><span style=color:#48b685>&#34;**********&#34;</span><span style=color:#5bc4bf>));</span>
</span></span><span style=display:flex><span>request<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>removeAdditionalHeader</span><span style=color:#5bc4bf>(</span><span style=color:#48b685>&#34;Proxy-Connection&#34;</span><span style=color:#5bc4bf>);</span>
</span></span><span style=display:flex><span>request<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>setAdditionalHeader</span><span style=color:#5bc4bf>(</span><span style=color:#48b685>&#34;Connection&#34;</span><span style=color:#5bc4bf>,</span> <span style=color:#48b685>&#34;Keep-Alive&#34;</span><span style=color:#5bc4bf>);</span>
</span></span><span style=display:flex><span>HtmlPage page1 <span style=color:#5bc4bf>=</span> webClient<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>getPage</span><span style=color:#5bc4bf>(</span>request<span style=color:#5bc4bf>);</span>
</span></span></code></pre></div><p>ä¾ç„¶ä¸è¡Œã€‚</p><h2 id=æŸ¥çœ‹æºç >æŸ¥çœ‹æºç </h2><p>æŸ¥çœ‹äº†HtmlUnitæºç ï¼ˆåœ¨æ­¤ä¸è´´å‡ºæ¥äº†ï¼‰ï¼Œå‘ç°æˆ‘ä»¬è°ƒç”¨å…¶æ–¹æ³•å¤„ç†Headerï¼Œæ‰€å¤„ç†çš„åªä¸è¿‡æ˜¯ä¸€ä¸ªé¢å¤–çš„Mapï¼Œä¸ç®¡å¢åŠ å’Œåˆ é™¤éƒ½æ˜¯åœ¨è¿™ä¸ªMapé‡Œé¢å¤„ç†çš„ï¼Œæœ€åçš„Headeræ˜¯è¿™ä¸ªé¢å¤–çš„Mapå’Œé¢„å®šä¹‰çš„ä¸€äº›Headerç»“åˆåœ¨ä¸€èµ·ã€‚ä½†æ˜¯åœ¨æºç ä¸­ä¹Ÿæ²¡æœ‰å‘ç°Proxy-Connectionå­—æ®µçš„å¤„ç†ï¼ˆå¦‚åˆ¤æ–­å½“å‰ä½¿ç”¨ä»£ç†ï¼Œåˆ™ç”¨Proxy-Connectionå­—æ®µå–ä»£Connectionå­—æ®µç­‰é€»è¾‘ï¼‰ã€‚</p><p>ä»”ç»†è§‚å¯Ÿï¼Œå…¶å®HtmlUnitåº•å±‚æ˜¯è°ƒç”¨äº†JDKçš„<strong>sun.net.www.protocol.http.HttpURLConnection</strong> è¿›è¡Œè®¿é—®çš„ï¼Œæˆ‘ä»¬å†çœ‹HttpURLConnectionçš„æºç ï¼Œå‘ç°æœ‰ä¸¤å¤„ï¼š</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#815ba4>private</span> <span style=color:#fec418>void</span> <span style=color:#06b6ef>writeRequests</span><span style=color:#5bc4bf>()</span> <span style=color:#815ba4>throws</span> IOException <span style=color:#5bc4bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#ef6155>â€¦â€¦â€¦â€¦</span>
</span></span><span style=display:flex><span>    <span style=color:#815ba4>if</span><span style=color:#5bc4bf>(</span><span style=color:#815ba4>this</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>http</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>usingProxy</span> <span style=color:#5bc4bf>&amp;&amp;</span> <span style=color:#815ba4>this</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>tunnelState</span><span style=color:#5bc4bf>()</span> <span style=color:#5bc4bf>!=</span> HttpURLConnection<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>TunnelState</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>TUNNELING</span><span style=color:#5bc4bf>)</span> <span style=color:#5bc4bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#815ba4>this</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>requests</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>setIfNotSet</span><span style=color:#5bc4bf>(</span><span style=color:#48b685>&#34;Proxy-Connection&#34;</span><span style=color:#5bc4bf>,</span> <span style=color:#48b685>&#34;keep-alive&#34;</span><span style=color:#5bc4bf>);</span>
</span></span><span style=display:flex><span>    <span style=color:#5bc4bf>}</span> <span style=color:#815ba4>else</span> <span style=color:#5bc4bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#815ba4>this</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>requests</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>setIfNotSet</span><span style=color:#5bc4bf>(</span><span style=color:#48b685>&#34;Connection&#34;</span><span style=color:#5bc4bf>,</span> <span style=color:#48b685>&#34;keep-alive&#34;</span><span style=color:#5bc4bf>);</span>
</span></span><span style=display:flex><span>    <span style=color:#5bc4bf>}</span>
</span></span><span style=display:flex><span>    <span style=color:#ef6155>â€¦â€¦â€¦â€¦</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#815ba4>private</span> <span style=color:#fec418>void</span> <span style=color:#06b6ef>sendCONNECTRequest</span><span style=color:#5bc4bf>()</span> <span style=color:#815ba4>throws</span> IOException <span style=color:#5bc4bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#ef6155>â€¦â€¦â€¦â€¦</span>
</span></span><span style=display:flex><span>    <span style=color:#815ba4>if</span><span style=color:#5bc4bf>(</span><span style=color:#815ba4>this</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>http</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>getHttpKeepAliveSet</span><span style=color:#5bc4bf>())</span> <span style=color:#5bc4bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#815ba4>this</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>requests</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>setIfNotSet</span><span style=color:#5bc4bf>(</span><span style=color:#48b685>&#34;Proxy-Connection&#34;</span><span style=color:#5bc4bf>,</span> <span style=color:#48b685>&#34;keep-alive&#34;</span><span style=color:#5bc4bf>);</span>
</span></span><span style=display:flex><span>    <span style=color:#5bc4bf>}</span>
</span></span><span style=display:flex><span>    <span style=color:#ef6155>â€¦â€¦â€¦â€¦</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>}</span>
</span></span></code></pre></div><p>åŸæ¥æ˜¯åœ¨è¿™é‡Œé¢å¤„ç†çš„ï¼ï¼ï¼ï¼</p><h2 id=ç¼–è¯‘rtjar>ç¼–è¯‘rt.jar</h2><p><strong>sun.net.www.protocol.http.HttpURLConnection</strong> æ˜¯åœ¨JREçš„rt.jarä¸­çš„æ ¸å¿ƒç±»ï¼Œä¸èƒ½éšä¾¿ä¿®æ”¹ã€‚
æ‰€ä»¥æˆ‘ä»¬æå–å‡ºHttpURLConnectionï¼Œåç¼–è¯‘ï¼Œæ³¨é‡Šæ‰Proxy-Connectionç›¸å…³è¯­å¥ï¼Œé‡æ–°ç¼–è¯‘ï¼Œæ›¿æ¢rt.jarä¸­çš„å“åº”classæ–‡ä»¶ï¼š<br><img src=/p/HtmlUnit%E7%88%AC%E8%99%AB%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E6%97%B6%E5%AF%B9HTTP%E8%AF%B7%E6%B1%82%E5%A4%B4Proxy-Connection%E5%AD%97%E6%AE%B5%E7%9A%84%E6%8E%A2%E7%A9%B6/1.png width=1052 height=532 srcset="/p/HtmlUnit%E7%88%AC%E8%99%AB%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E6%97%B6%E5%AF%B9HTTP%E8%AF%B7%E6%B1%82%E5%A4%B4Proxy-Connection%E5%AD%97%E6%AE%B5%E7%9A%84%E6%8E%A2%E7%A9%B6/1_hu2ce3ac896160117c1db594cb915b315b_46628_480x0_resize_box_3.png 480w, /p/HtmlUnit%E7%88%AC%E8%99%AB%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E6%97%B6%E5%AF%B9HTTP%E8%AF%B7%E6%B1%82%E5%A4%B4Proxy-Connection%E5%AD%97%E6%AE%B5%E7%9A%84%E6%8E%A2%E7%A9%B6/1_hu2ce3ac896160117c1db594cb915b315b_46628_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=197 data-flex-basis=474px><br>é‡æ–°æµ‹è¯•ï¼Œå‘ç°å‘å‡ºçš„è¯·æ±‚è¿˜æ˜¯å¸¦æœ‰Proxy-Connectionå­—æ®µï¼ï¼ï¼ï¼</p><h1 id=pythonéªŒè¯>PythonéªŒè¯</h1><p>ä»å¦ä¸€ä¸ªè§’åº¦æ¥éªŒè¯ï¼šå¯¹äºHtmlUnitä½¿ç”¨ä¼šè¿”å›403çš„ä»£ç†ï¼Œåœ¨Pythonçš„Requestsä¸­ä½¿ç”¨ï¼Œå¹¶åœ¨HTTPè¯·æ±‚å¤´åŠ ä¸ŠProxy-Connectionå­—æ®µã€‚Pythonä»£ç æ¯”è¾ƒç®€å•ï¼Œæ‰§è¡Œæ—¶è¾“å…¥éœ€è¦éªŒè¯çš„IPå’Œç«¯å£å°±è¡Œï¼š</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#776e71>#coding:utf-8                                                                                                                     </span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>import</span> <span style=color:#fec418>requests</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>import</span> <span style=color:#fec418>json</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>import</span> <span style=color:#fec418>sys</span>
</span></span><span style=display:flex><span>ip <span style=color:#5bc4bf>=</span> sys<span style=color:#5bc4bf>.</span>argv[<span style=color:#f99b15>1</span>]
</span></span><span style=display:flex><span>port <span style=color:#5bc4bf>=</span> sys<span style=color:#5bc4bf>.</span>argv[<span style=color:#f99b15>2</span>]
</span></span><span style=display:flex><span>header <span style=color:#5bc4bf>=</span>{<span style=color:#48b685>&#39;Proxy-Connection&#39;</span>:<span style=color:#48b685>&#39;Keep-Alive&#39;</span>}
</span></span><span style=display:flex><span>proxies<span style=color:#5bc4bf>=</span>{
</span></span><span style=display:flex><span>    <span style=color:#48b685>&#39;http&#39;</span>:<span style=color:#48b685>&#39;http://</span><span style=color:#f99b15>%s</span><span style=color:#48b685>:</span><span style=color:#f99b15>%s</span><span style=color:#48b685>&#39;</span><span style=color:#5bc4bf>%</span>(ip,port),
</span></span><span style=display:flex><span>    <span style=color:#48b685>&#39;https&#39;</span>:<span style=color:#48b685>&#39;http://</span><span style=color:#f99b15>%s</span><span style=color:#48b685>:</span><span style=color:#f99b15>%s</span><span style=color:#48b685>&#39;</span><span style=color:#5bc4bf>%</span>(ip,port)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>r <span style=color:#5bc4bf>=</span> requests<span style=color:#5bc4bf>.</span>get(<span style=color:#48b685>&#39;http://www.***.com/test/index.htm&#39;</span>,proxies<span style=color:#5bc4bf>=</span>proxies,headers<span style=color:#5bc4bf>=</span>header)
</span></span><span style=display:flex><span>r<span style=color:#5bc4bf>.</span>encoding<span style=color:#5bc4bf>=</span><span style=color:#48b685>&#39;utf-8&#39;</span>
</span></span><span style=display:flex><span>print r<span style=color:#5bc4bf>.</span>text
</span></span><span style=display:flex><span><span style=color:#5bc4bf>~</span>                                   
</span></span></code></pre></div><p>æœç„¶ï¼Œæ§åˆ¶å°è¾“å‡ºâ€œAccess not allowed!â€ã€‚å°†â€œheaders=headerâ€å»æ‰ä¹‹åå°±èƒ½æ­£å¸¸è¾“å‡ºé¡µé¢å†…å®¹ã€‚<br>å› æ­¤å¯ä»¥ç¡®è®¤æ˜¯Proxy-Connectionå­—æ®µå¯¼è‡´çš„é—®é¢˜ã€‚</p><h1 id=ç›®å‰ç»“è®º>ç›®å‰ç»“è®º</h1><ol><li>å¯¹äºæŸäº›ä»£ç†æœåŠ¡å™¨ï¼Œä½¿ç”¨æ—¶è¯·æ±‚å¤´ä¸èƒ½æœ‰Proxy-Connectionå­—æ®µï¼›</li><li>åœ¨å®¶é‡Œè·‘è¿™ä¸ªå·¥å…·ï¼Œå´åŸºæœ¬æ²¡æœ‰è¿”å›403é”™è¯¯â€¦â€¦â€¦â€¦çœ‹æ¥è¿˜æœ‰å¯èƒ½æ˜¯åŠå…¬å®¤IPè¢«åˆ—å…¥é»‘åå•äº†â€¦â€¦</li><li>å¯¹äºJavaå¼€å‘ï¼Œè¦é€‰æ‹©ä¸é€‚ç”¨sunçš„HttpUrlConnectionçš„htmlæµ‹è¯•å·¥å…·/æ¨¡æ‹Ÿæµè§ˆå™¨äº†ï¼›çœ‹äº†Seleniumçš„æºç ï¼Œæ²¡æœ‰ç”¨è¿™ä¸ªç±»ï¼Œå‡†å¤‡è¯•ä¸‹ã€‚</li></ol></section><footer class=article-footer><section class=article-tags><a href=/tags/%E7%88%AC%E8%99%AB/>çˆ¬è™«</a>
<a href=/tags/%E4%BB%A3%E7%90%86/>ä»£ç†</a>
<a href=/tags/HtmlUnit/>HtmlUnit</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under Apache License 2.0</span></section></footer></article><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//leibnizhu.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2016 -
2022 Heaven's Door</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#removerequestheader>removeRequestHeader()</a></li><li><a href=#webrequestremoveadditionalheader>WebRequest.removeAdditionalHeader()</a></li><li><a href=#æŸ¥çœ‹æºç >æŸ¥çœ‹æºç </a></li><li><a href=#ç¼–è¯‘rtjar>ç¼–è¯‘rt.jar</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>